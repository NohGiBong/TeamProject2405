<!DOCTYPE HTML>
<!--
	Helios by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<head>
    <title>Cinemacast</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/static/css/main.css" />
    <link rel="stylesheet" href="/static/css/custom.css" />
    <link rel="stylesheet" href="/static/css/nav.css" />
    <noscript><link rel="stylesheet" href="/static/css/noscript.css" /></noscript>
</head>
<body class="right-sidebar is-preload">
<div id="page-wrapper">

    <header data-include-path="./header.html"></header>

    <!-- Main -->
    <div class="wrapper style1">

        <div class="container">
            <div class="row gtr-200">
                <div class="col-8 col-12-mobile" id="content">
                    <article id="main">
                        <header>
                            <h2><a href="#">Movie Title</a></h2>
                            <p>
                                THE ROUNDUP : PUNISHMENT
                            </p>
                        </header>
                        <div id="get_header">
                            <a href="#" class="image featured" style="width: 40%;"><img src="/static/css/images/movieposter.webp" alt="영화포스터" /></a>
                            <div class="movie_info">
                                <p><b>개봉일자 : </b>releasedate</p>
                                <p><b>장르 : </b>genres</p>
                                <p><b>상영시간 : </b>runtime</p>
                                <p><b>감독 : </b>director <b>각본 : </b>writer</p>

                                <div class="movie_data_box">
                                    <div class="movie_data">
                                        <h4>누적 관객수</h4>
                                        <p>cnv</p>
                                    </div>
                                    <div class="movie_data">
                                        <h4>예매율</h4>
                                        <p>popularity (%)</p>
                                    </div>
                                    <div class="movie_data">
                                        <h4>실관람 평점</h4>
                                        <p>star rating</p>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div id="movie-info"></div>
                        <p>
                            Commodo id natoque malesuada sollicitudin elit suscipit. Curae suspendisse mauris posuere accumsan massa
                            posuere lacus convallis tellus interdum. Amet nullam fringilla nibh nulla convallis ut venenatis purus
                            lobortis. Auctor etiam porttitor phasellus tempus cubilia ultrices tempor sagittis. Nisl fermentum
                            consequat integer interdum integer purus sapien. Nibh eleifend nulla nascetur pharetra commodo mi augue
                            interdum tellus. Ornare cursus augue feugiat sodales velit lorem. Semper elementum ullamcorper lacinia
                            natoque aenean scelerisque vel lacinia mollis quam sodales congue.
                        </p>
                    </article>
                </div>
                <div class="col-4 col-12-mobile" id="sidebar">
                    <hr class="first" />
                    <section>
                        <header>
                            <h3><a href="#">Sed lorem etiam consequat</a></h3>
                        </header>
                        <div class="row gtr-50">
                            <div class="col-4">
                                <a href="#" class="image fit"><img src="/static/css/images/pic10.jpg" alt="" /></a>
                            </div>
                            <div class="col-8">
                                <h4>Nibh sed cubilia</h4>
                                <p>
                                    Amet nullam fringilla nibh nulla convallis tique ante proin.
                                </p>
                            </div>
                            <div class="col-4">
                                <a href="#" class="image fit"><img src="/static/css/images/pic11.jpg" alt="" /></a>
                            </div>
                            <div class="col-8">
                                <h4>Proin sed adipiscing</h4>
                                <p>
                                    Amet nullam fringilla nibh nulla convallis tique ante proin.
                                </p>
                            </div>
                            <div class="col-4">
                                <a href="#" class="image fit"><img src="/static/css/images/pic12.jpg" alt="" /></a>
                            </div>
                            <div class="col-8">
                                <h4>Lorem feugiat magna</h4>
                                <p>
                                    Amet nullam fringilla nibh nulla convallis tique ante proin.
                                </p>
                            </div>
                            <div class="col-4">
                                <a href="#" class="image fit"><img src="/static/css/images/pic13.jpg" alt="" /></a>
                            </div>
                            <div class="col-8">
                                <h4>Sed tempus fringilla</h4>
                                <p>
                                    Amet nullam fringilla nibh nulla convallis tique ante proin.
                                </p>
                            </div>
                            <div class="col-4">
                                <a href="#" class="image fit"><img src="/static/css/images/pic14.jpg" alt="" /></a>
                            </div>
                            <div class="col-8">
                                <h4>Malesuada fermentum</h4>
                                <p>
                                    Amet nullam fringilla nibh nulla convallis tique ante proin.
                                </p>
                            </div>
                        </div>
                        <footer>
                            <a href="#" class="button">Magna Adipiscing</a>
                        </footer>
                    </section>
                </div>
            </div>
            <div id="stillcut">
                <hr />
                <h2>StillCut</h2>
                <div class="row">
                    <article class="col-4 col-12-mobile special">
                        <a href="#" class="image featured"><img src="/static/css/images/pic07.jpg" alt="" /></a>
                    </article>
                    <article class="col-4 col-12-mobile special">
                        <a href="#" class="image featured"><img src="/static/css/images/pic08.jpg" alt="" /></a>
                    </article>
                    <article class="col-4 col-12-mobile special">
                        <a href="#" class="image featured"><img src="/static/css/images/pic09.jpg" alt="" /></a>
                    </article>
                </div>
            </div>
        </div>

    </div>

    <footer data-include-path="footer.html"></footer>
</div>

<!-- Scripts -->
<script src="/static/js/jquery.min.js"></script>
<script src="/static/js/jquery.dropotron.min.js"></script>
<script src="/static/js/jquery.scrolly.min.js"></script>
<script src="/static/js/jquery.scrollex.min.js"></script>
<script src="/static/js/browser.min.js"></script>
<script src="/static/js/breakpoints.min.js"></script>
<script src="/static/js/util.js"></script>
<script src="/static/js/main.js"></script>

<script>
    // include.js
    window.addEventListener('load', function() {
        var allElements = document.getElementsByTagName('*');
        Array.prototype.forEach.call(allElements, function (el) {
            var includePath = el.dataset.includePath;
            if (includePath) {
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4 && this.status == 200) {
                        el.outerHTML = this.responseText;
                    }
                };
                xhttp.open('GET', includePath, true);
                xhttp.send();
            }
        });
    });

    const options = {
        method: 'GET',
        headers: {
            accept: 'application/json',
            Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI3N2UzMWU5NWVjZmE3ZjBlODY5YTE3NmQwMjU0YWQwMiIsInN1YiI6IjY2NDJiMWM1ZTJlZjM4N2Y1MjM1OTNjZCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.hBVsW7eVrC2M3FdWc2OJEAWq0h4v-NiiM2YEDQoy7OU'
        }
    };

    async function fetchMovieCredits() {
        try {
            const response = await fetch('https://api.themoviedb.org/3/movie/1011985/credits?language=ko-KR', options);
            const data = await response.json();

            // 영화 정보를 담을 요소 생성
            const movieInfoDiv = document.getElementById('movie-info');
            movieInfoDiv.style.display = 'flex'; // Flexbox 레이아웃 적용
            movieInfoDiv.style.flexWrap = 'wrap'; // 요소들이 넘치면 다음 줄로 넘김

            // 출연진 정보 출력 (이미지 포함)
            data.cast.slice(0, 5).forEach(cast => {
                const castDiv = createPersonDiv(cast.name, cast.profile_path);
                movieInfoDiv.appendChild(castDiv); // castDiv를 movieInfoDiv에 추가
            });

            // 감독 정보 출력 (이미지 포함)
            const director = data.crew.find(person => person.job === 'Director');
            if (director) {
                const directorDiv = createPersonDiv(director.name, director.profile_path, true);
                movieInfoDiv.appendChild(directorDiv); // directorDiv를 movieInfoDiv에 추가
            }
        } catch (error) {
            console.error('Error:', error);
        }
    }

    // 인물 정보와 이미지를 담은 div 생성 함수
    function createPersonDiv(name, profilePath, isDirector = false) {
        const personDiv = document.createElement('div'); // 새로운 div 생성
        personDiv.style.margin = '5px'; // 간격 설정

        const p = document.createElement('p');
        p.innerHTML = isDirector ? `<b>감독 : </b>${name}` : name;
        p.style.fontSize = '15px'; // 글자 크기 작게 설정

        const img = document.createElement('img');
        img.src = `https://image.tmdb.org/t/p/w200${profilePath}`; // 이미지 경로 설정
        img.alt = `${name}'s profile image`;
        img.style.width = '40px';
        img.style.height = 'auto'; // 높이를 자동으로 설정

        personDiv.appendChild(p);
        personDiv.appendChild(img);

        return personDiv;
    }

    fetchMovieCredits();

    const api = {
        method: 'GET',
        headers: {
            accept: 'application/json',
            Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI3N2UzMWU5NWVjZmE3ZjBlODY5YTE3NmQwMjU0YWQwMiIsInN1YiI6IjY2NDJiMWM1ZTJlZjM4N2Y1MjM1OTNjZCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.hBVsW7eVrC2M3FdWc2OJEAWq0h4v-NiiM2YEDQoy7OU'
        }
    };




</script>


<div th:each="movie, iterStat : ${movies}">
    <div>
        <h2>영화 번호: <span th:text="${movie.id}">영화 번호</span></h2>
        <h3>영화 이름: <span th:text="${movie.title}">영화 이름</span></h3>
        <p>영화 설명: <span th:text="${movie.overview}">영화 설명</span></p>
        <p>영화 장르: <span th:text="${#strings.listJoin(movie.genres, ', ')}">영화 장르</span></p>
        <p>영화 평점: <span th:text="${movie.voteAverage}">영화 평점</span></p>
        <p>인기도: <span th:text="${movie.popularity}">인기도</span></p>
        <div th:if="${movie.video}">
            <p>영화 비디오:</p>
            <iframe width="500" height="280" th:src="@{'https://www.youtube.com/embed/' + ${movie.video}}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <p>영화 배경사진:</p>
        <img th:src="@{'https://image.tmdb.org/t/p/w200' + ${movie.backdropPath}}" alt="배경사진" />
        <p>영화 포스터:</p>
        <img th:src="@{'https://image.tmdb.org/t/p/w200' + ${movie.posterPath}}" alt="포스터" />
    </div>
</div>

</body>
</html>